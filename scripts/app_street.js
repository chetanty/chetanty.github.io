const _0x3724cb=_0x174d;(function(_0x127605,_0x1734e7){const _0x2474fe=_0x174d,_0x4aeb18=_0x127605();while(!![]){try{const _0x385b86=-parseInt(_0x2474fe(0x1e8))/0x1+parseInt(_0x2474fe(0x1b9))/0x2*(parseInt(_0x2474fe(0x207))/0x3)+parseInt(_0x2474fe(0x1ec))/0x4*(-parseInt(_0x2474fe(0x1a7))/0x5)+parseInt(_0x2474fe(0x18f))/0x6+-parseInt(_0x2474fe(0x212))/0x7*(parseInt(_0x2474fe(0x1c5))/0x8)+-parseInt(_0x2474fe(0x1c0))/0x9+-parseInt(_0x2474fe(0x201))/0xa*(-parseInt(_0x2474fe(0x1f2))/0xb);if(_0x385b86===_0x1734e7)break;else _0x4aeb18['push'](_0x4aeb18['shift']());}catch(_0x1d74a6){_0x4aeb18['push'](_0x4aeb18['shift']());}}}(_0x2be9,0xe4513));const map=L[_0x3724cb(0x1c3)](_0x3724cb(0x1c3))[_0x3724cb(0x19e)]([0x0,0x0],0x2),tileLayer=L['tileLayer'](_0x3724cb(0x1ed),{'maxZoom':0x10})[_0x3724cb(0x19f)](map);function _0x174d(_0x303293,_0x42398b){const _0x2be9c6=_0x2be9();return _0x174d=function(_0x174df1,_0x3ffde7){_0x174df1=_0x174df1-0x18d;let _0x1fe682=_0x2be9c6[_0x174df1];return _0x1fe682;},_0x174d(_0x303293,_0x42398b);}let guessedCities={},playerScore=0x0,marker=null,initialCity='',initialCountry='',initialCapital='',initialLat=0x0,initialLng=0x0,startTime=0x0,endTime=0x0,timerInterval=null;tingtong=0x0;async function initializeGame(){const _0x72141f=_0x3724cb;[initialLat,initialLng]=await getRandomLandCoordinates();const _0x4c6316=_0x72141f(0x190)+initialLat+_0x72141f(0x1d9)+initialLng;try{const _0x3e1d04=await fetch(_0x4c6316),_0x33f5ae=await _0x3e1d04[_0x72141f(0x1c8)]();initialCity=_0x33f5ae[_0x72141f(0x1a5)]['city']||_0x33f5ae[_0x72141f(0x1a5)]['town']||_0x33f5ae['address'][_0x72141f(0x1ff)]||_0x33f5ae[_0x72141f(0x1a5)][_0x72141f(0x1ca)]||'Unknown',initialCountry=_0x33f5ae[_0x72141f(0x1a5)][_0x72141f(0x1b5)]||_0x72141f(0x1ce);}catch(_0x450217){console[_0x72141f(0x1e7)](_0x72141f(0x1b3),_0x450217);}}function startTimer(){const _0x582a99=_0x3724cb;let _0x1abb8c=0x0;const _0x21d01a=document[_0x582a99(0x1d8)]('timer');timerInterval=setInterval(()=>{const _0x19abdc=_0x582a99;_0x1abb8c++,_0x21d01a[_0x19abdc(0x1aa)]=_0x19abdc(0x1d6)+_0x1abb8c+_0x19abdc(0x1e0);},0x3e8),tingtong=0x5;}map['on'](_0x3724cb(0x1a4),function(_0x1531ac){const _0x2c0893=_0x3724cb;marker===null?marker=L[_0x2c0893(0x1c2)](_0x1531ac[_0x2c0893(0x1fb)],{'icon':L[_0x2c0893(0x20e)]({'iconUrl':_0x2c0893(0x197),'iconSize':[0x41,0x41]})})['addTo'](map):marker['setLatLng'](_0x1531ac['latlng']);});if(tingtong!=0x5){startTimer(),startTime=Date[_0x3724cb(0x198)]();;}function stopTimer(){clearInterval(timerInterval),timerInterval=null;}async function updateHighScoreList(){const _0x1de540=_0x3724cb,_0x40692e=document[_0x1de540(0x1d8)](_0x1de540(0x200));_0x40692e[_0x1de540(0x1d5)]='';try{const _0x1fd584=await db[_0x1de540(0x1e2)]('street_score')[_0x1de540(0x202)]('score','desc')[_0x1de540(0x1dd)](0xa)[_0x1de540(0x1ea)]();let _0x443378=0x1;_0x1fd584['forEach'](_0x5a0a77=>{const _0x525f77=_0x1de540,_0x34670a=_0x5a0a77['data'](),_0x459d61=document[_0x525f77(0x18e)]('li');_0x459d61[_0x525f77(0x1d5)]=_0x525f77(0x1ba)+_0x34670a[_0x525f77(0x1bb)]+_0x525f77(0x210)+_0x34670a[_0x525f77(0x1b7)]+_0x525f77(0x18d)+_0x34670a[_0x525f77(0x1bc)]+')',_0x40692e[_0x525f77(0x1ee)](_0x459d61),_0x443378++;});}catch(_0x407c78){console[_0x1de540(0x1e7)](_0x1de540(0x1dc),_0x407c78);}}let image1=document[_0x3724cb(0x1d8)](_0x3724cb(0x1a6)),image2=document[_0x3724cb(0x1d8)](_0x3724cb(0x1cc)),image3=document[_0x3724cb(0x1d8)](_0x3724cb(0x209));const guessButton=document['getElementById']('guess-button'),showCoordinatesCheckbox=document[_0x3724cb(0x1d8)](_0x3724cb(0x1c1));let guessCount=0x0;function _0x2be9(){const _0x5251ca=['Time\x20Elapsed:\x20','prague-198071292185889','getElementById','&lon=','rio\x20de\x20janeiro-477309337031051','cuzco-279416883907644','Error\x20getting\x20high\x20scores:\x20','limit','beijing-604012977205983','firstChild','\x20seconds','new-game-button','collection','edmonton-276369800814495','none','style','toggle-high-scores','error','1701279kaBDhG','barcelona-987420751796837','get','pisa-243324604210417','6675716CNZJli','https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}','appendChild','Show\x20High\x20Scores','addEventListener','toLocaleDateString','1593603gfpXbk','player-score','distanceTo','Show\x20Map','split','hidden','<strong>Guess\x20Coordinates:</strong>\x20','las\x20vegas-587347449630786','lucerne-1112576252586784','latlng','city','replace','toggle-map','village','high-score-list','220UxqXoz','orderBy','button','mly','See\x20the\x20Answer','dubai-331484938401580','6keZCOw','Error\x20retrieving\x20city\x20information\x20for:','image3','toFixed','jakarta-383086720385784','.text-container','block','icon','london-557807761891307','</strong>:\x20','new\x20york-126491143334729','77063psIQKT','Reload\x20the\x20page\x20to\x20start\x20a\x20new\x20round.','\x20points\x20(','createElement','4825728eMALZy','https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=','then','<br>','user-name','calgary-1092582851151417','length','result','../styles/assets/select_marker.png','now','timer','removeLayer','tokyo-1195388297830542','.text-center2','load','setView','addTo','\x20kilometers.\x20<strong>Your\x20Guess:</strong>\x20','push','querySelector','<strong>You\x20win!\x20Distance\x20from\x20answer:</strong>\x20','click','address','image1','5giPswM','log','trim','textContent','save-score','town','disabled','visible','lng','add','keystone-768858467067157','lat','Error\x20retrieving\x20city,\x20country,\x20and\x20capital\x20for\x20initial\x20coordinates:','getLatLng','country','visibility','score','Guess\x20City','1430282aSQAxn','<strong>\x20','name','date','display','chicago-513112553151500','https://nominatim.openstreetmap.org/search?city=','9552024bQDJQW','show-coordinates','marker','map','bangkok-492548511955809','40JyFjjT','score-table','new\x20york-533358671467146','json','houston-626149635009294','hamlet','join','image2','&lt;','Unknown','High\x20score\x20saved\x20with\x20ID:\x20','checked','&format=json','banff-162769565655436','catch','random','innerHTML'];_0x2be9=function(){return _0x5251ca;};return _0x2be9();}guessButton[_0x3724cb(0x1f0)](_0x3724cb(0x1a4),async function(){const _0x9de17e=_0x3724cb;if(marker===null)return;guessCount>=0x2&&(guessButton[_0x9de17e(0x1aa)]=_0x9de17e(0x205));if(guessCount>=0x3){const _0x2ecfca=L[_0x9de17e(0x20e)]({'iconUrl':'../styles/assets/result_marker.png','iconSize':[0x41,0x41]}),_0x37dc8e=L[_0x9de17e(0x1c2)]([initialLat,initialLng],{'icon':_0x2ecfca})[_0x9de17e(0x19f)](map);return;}guessCount++;const _0x82b678=marker[_0x9de17e(0x1b4)]()[_0x9de17e(0x1b2)][_0x9de17e(0x20a)](0x4),_0x112b2d=marker['getLatLng']()[_0x9de17e(0x1af)][_0x9de17e(0x20a)](0x4),_0xce2182=document[_0x9de17e(0x1a2)](_0x9de17e(0x19c));_0xce2182!==null&&(_0xce2182[_0x9de17e(0x1aa)]='');const _0x14690c=document[_0x9de17e(0x1d8)]('loading');_0x14690c[_0x9de17e(0x1e5)][_0x9de17e(0x1bd)]='block';const _0x234688=_0x9de17e(0x190)+_0x82b678+_0x9de17e(0x1d9)+_0x112b2d;try{const _0x1ca0f8=await fetch(_0x234688),_0x34a2e3=await _0x1ca0f8[_0x9de17e(0x1c8)](),_0x16013c=_0x34a2e3[_0x9de17e(0x1a5)][_0x9de17e(0x1fc)]||_0x34a2e3['address'][_0x9de17e(0x1ac)]||_0x34a2e3['address'][_0x9de17e(0x1ff)]||_0x34a2e3[_0x9de17e(0x1a5)][_0x9de17e(0x1ca)]||_0x9de17e(0x1ce),_0x27b24a=_0x34a2e3['address'][_0x9de17e(0x1b5)]||_0x9de17e(0x1ce),_0xa36a05=Math['round'](marker['getLatLng']()['distanceTo']([initialLat,initialLng])),_0x33a738=[];for(const _0x4b718a in guessedCities){const _0x24a9d5=marker[_0x9de17e(0x1b4)]()[_0x9de17e(0x1f4)](guessedCities[_0x4b718a]['getLatLng']());if(_0x24a9d5<=0xc350){alert('You\x20are\x20too\x20close\x20to\x20a\x20previously\x20guessed\x20city.\x20Try\x20another\x20location.');return;}}if(_0xa36a05<0xc350){endTime=Date['now']();const _0x51841c=(endTime-startTime)/0x3e8;playerScore+=0xa,_0x33a738['push'](_0x9de17e(0x1a3)+_0xa36a05/0x3e8+'\x20kilometers.\x20<strong>Your\x20Guess:</strong>\x20'+_0x16013c+',\x20'+_0x27b24a+'.\x20'),guessedCities[initialCity]=L[_0x9de17e(0x1c2)](marker['getLatLng']())[_0x9de17e(0x19f)](map),stopTimer(),_0x33a738[_0x9de17e(0x1a1)](_0x9de17e(0x213));const _0x5986d0=document[_0x9de17e(0x1d8)](_0x9de17e(0x1f3));_0x5986d0[_0x9de17e(0x1aa)]=playerScore;}else{_0x33a738[_0x9de17e(0x1a1)]('<strong>Distance\x20from\x20answer:</strong>\x20'+_0xa36a05/0x3e8+_0x9de17e(0x1a0)+_0x16013c+',\x20'+_0x27b24a+'.');if(guessCount===0x1)image1[_0x9de17e(0x1e5)][_0x9de17e(0x1bd)]='none';else{if(guessCount===0x2)image2[_0x9de17e(0x1e5)]['display']=_0x9de17e(0x1e4);else guessCount===0x3&&(image3[_0x9de17e(0x1e5)]['display']=_0x9de17e(0x1e4));}if(initialLat[_0x9de17e(0x20a)](0x4)!==0x0&&initialCity!==''&&initialCity!=='Unknown'){}else{let _0x487bef=![];do{[initialLat,initialLng]=await getRandomLandCoordinates();const _0x45d4dc=_0x9de17e(0x190)+initialLat+_0x9de17e(0x1d9)+initialLng;try{const _0x26b0a0=await fetch(_0x45d4dc),_0x38a03f=await _0x26b0a0['json']();initialCity=_0x38a03f[_0x9de17e(0x1a5)][_0x9de17e(0x1fc)]||_0x38a03f[_0x9de17e(0x1a5)]['town']||_0x38a03f[_0x9de17e(0x1a5)]['village']||_0x38a03f[_0x9de17e(0x1a5)][_0x9de17e(0x1ca)]||'Unknown',_0x487bef=initialCity!==''&&initialCity!==_0x9de17e(0x1ce),initialCountry=_0x38a03f[_0x9de17e(0x1a5)][_0x9de17e(0x1b5)]||_0x9de17e(0x1ce);}catch(_0x53fae0){console[_0x9de17e(0x1e7)](_0x9de17e(0x1b3),_0x53fae0);}}while(!_0x487bef);}}showCoordinatesCheckbox[_0x9de17e(0x1d0)]&&(_0x33a738[_0x9de17e(0x1a1)](_0x9de17e(0x1f8)+_0x82b678+',\x20'+_0x112b2d),_0x33a738[_0x9de17e(0x1a1)]('<strong>Answer\x20Coordinates:</strong>\x20'+initialLat['toFixed'](0x4)+',\x20'+initialLng[_0x9de17e(0x20a)](0x4)));const _0x52e2db=document['getElementById'](_0x9de17e(0x196));_0x52e2db[_0x9de17e(0x1d5)]=_0x33a738[_0x9de17e(0x1cb)](_0x9de17e(0x192));}catch(_0x3e3ce3){console[_0x9de17e(0x1e7)]('Error\x20retrieving\x20nearest\x20city,\x20country,\x20and\x20capital:',_0x3e3ce3);}finally{_0x14690c[_0x9de17e(0x1e5)]['display']='none';}});function resetImages(){const _0x569fcc=_0x3724cb;image1['style'][_0x569fcc(0x1bd)]=_0x569fcc(0x20d),image2[_0x569fcc(0x1e5)][_0x569fcc(0x1bd)]=_0x569fcc(0x20d),image3[_0x569fcc(0x1e5)][_0x569fcc(0x1bd)]='block';}function sanitizeInput(_0x17b383){const _0x39bbf9=_0x3724cb;return _0x17b383['replace'](/</g,_0x39bbf9(0x1cd))[_0x39bbf9(0x1fd)](/&/g,'&amp;');}async function getRandomLandCoordinates(){const _0x5fc903=_0x3724cb,_0x4e76c6=['paris-1202903123464252','agra-156038159745395',_0x5fc903(0x1b1),_0x5fc903(0x1e9),_0x5fc903(0x1de),_0x5fc903(0x19b),'berlin-3239772952947894',_0x5fc903(0x1fa),_0x5fc903(0x1eb),_0x5fc903(0x1c4),_0x5fc903(0x1c9),'singapore-2800278286968363',_0x5fc903(0x20b),_0x5fc903(0x211),'kabul-143431291046379',_0x5fc903(0x1d2),_0x5fc903(0x1e3),_0x5fc903(0x20f),'oslo-229430919192635',_0x5fc903(0x194),_0x5fc903(0x1da),'hanoi-685942156728923',_0x5fc903(0x1be),_0x5fc903(0x206),_0x5fc903(0x1db),_0x5fc903(0x1c7),'amsterdam-838761340319948',_0x5fc903(0x1f9),'reykjavik-200688741736661',_0x5fc903(0x1d7)];function _0x493ee6(_0x27d157){const _0x3efbd8=_0x5fc903;for(let _0x133b09=_0x27d157['length']-0x1;_0x133b09>0x0;_0x133b09--){const _0x4cce29=Math['floor'](Math[_0x3efbd8(0x1d4)]()*(_0x133b09+0x1));[_0x27d157[_0x133b09],_0x27d157[_0x4cce29]]=[_0x27d157[_0x4cce29],_0x27d157[_0x133b09]];}}_0x493ee6(_0x4e76c6);const _0x77994d=_0x4e76c6[Math['floor'](Math[_0x5fc903(0x1d4)]()*_0x4e76c6[_0x5fc903(0x195)])],_0x545049=_0x77994d[_0x5fc903(0x1f6)]('-')[0x0],_0x58302e=_0x77994d[_0x5fc903(0x1f6)]('-')[0x1];var {Viewer:_0x37ffbc}=mapillary,_0x1637c2=new _0x37ffbc({'accessToken':'MLY|6567123976742596|e9835e8db194154123b48d4979d5927c','container':_0x5fc903(0x204),'imageId':_0x58302e,'sequence':![]});const _0x1501aa=_0x545049,_0x34577a=_0x5fc903(0x1bf)+encodeURIComponent(_0x1501aa)+_0x5fc903(0x1d1);let _0x3982f6,_0x2e406b,_0x49fe23,_0x38d93d;try{const _0x43f90c=await fetch(_0x34577a),_0x5104e0=await _0x43f90c['json']();_0x5104e0&&_0x5104e0[0x0]&&(_0x3982f6=parseFloat(_0x5104e0[0x0][_0x5fc903(0x1b2)]),_0x2e406b=parseFloat(_0x5104e0[0x0]['lon']));}catch(_0x43a9b6){console[_0x5fc903(0x1e7)](_0x5fc903(0x208),_0x1501aa,_0x43a9b6);}return[_0x3982f6,_0x2e406b];}let highScoresVisible=![];function toggleHighScores(){const _0x35b902=_0x3724cb,_0x49aaae=document[_0x35b902(0x1d8)](_0x35b902(0x1c6)),_0x4a48b5=document[_0x35b902(0x1d8)](_0x35b902(0x1e6));highScoresVisible?(_0x49aaae[_0x35b902(0x1e5)][_0x35b902(0x1bd)]=_0x35b902(0x1e4),_0x4a48b5[_0x35b902(0x1aa)]=_0x35b902(0x1ef)):(_0x49aaae[_0x35b902(0x1e5)][_0x35b902(0x1bd)]='block',_0x4a48b5[_0x35b902(0x1aa)]='Hide\x20High\x20Scores'),highScoresVisible=!highScoresVisible;}let mapVisible=![];function toggleMap(){const _0x3e3986=_0x3724cb,_0x5c3d75=document['getElementById'](_0x3e3986(0x1c3)),_0x41090=document[_0x3e3986(0x1d8)](_0x3e3986(0x1fe));mapVisible?(_0x5c3d75[_0x3e3986(0x1e5)][_0x3e3986(0x1b6)]=_0x3e3986(0x1f7),_0x41090[_0x3e3986(0x1aa)]=_0x3e3986(0x1f5)):(_0x5c3d75[_0x3e3986(0x1e5)]['visibility']=_0x3e3986(0x1ae),_0x41090[_0x3e3986(0x1aa)]='Hide\x20Map'),mapVisible=!mapVisible;}window[_0x3724cb(0x1f0)]('load',async function(){await initializeGame(),updateHighScoreList();});const saveScoreButton=document[_0x3724cb(0x1d8)](_0x3724cb(0x1ab));saveScoreButton[_0x3724cb(0x1f0)](_0x3724cb(0x1a4),async()=>{const _0x2b03a2=_0x3724cb;saveScoreButton[_0x2b03a2(0x1ad)]=!![];const _0xbe6f9=document[_0x2b03a2(0x1d8)](_0x2b03a2(0x193)),_0x470b37=_0xbe6f9['value'],_0x52a223=sanitizeInput(_0x470b37);if(_0x52a223&&_0x52a223[_0x2b03a2(0x1a9)]()!==''&&_0x52a223['length']<=0xf){const _0x1cd9f3=playerScore,_0x3389eb=new Date()[_0x2b03a2(0x1f1)](),_0x2a6fae={'name':_0x52a223,'score':_0x1cd9f3,'date':_0x3389eb};db[_0x2b03a2(0x1e2)]('street_score')[_0x2b03a2(0x1b0)](_0x2a6fae)[_0x2b03a2(0x191)](function(_0x538d0e){const _0x41b46e=_0x2b03a2;console[_0x41b46e(0x1a8)](_0x41b46e(0x1cf),_0x538d0e['id']),_0xbe6f9[_0x41b46e(0x1e5)]['display']='none',saveScoreButton[_0x41b46e(0x1e5)][_0x41b46e(0x1bd)]='none';const _0x396c7d=document[_0x41b46e(0x1d8)]('submitted-message');_0x396c7d[_0x41b46e(0x1e5)]['display']=_0x41b46e(0x20d);const _0x49eebf=document[_0x41b46e(0x1d8)](_0x41b46e(0x200)),_0x419a64=document['createElement']('li');_0x419a64['textContent']=_0x52a223+',\x20Score:\x20'+_0x1cd9f3+',\x20Date:\x20'+_0x3389eb,_0x49eebf['appendChild'](_0x419a64);})[_0x2b03a2(0x1d3)](function(_0x4237ec){const _0x580b5e=_0x2b03a2;console[_0x580b5e(0x1e7)]('Error\x20adding\x20high\x20score:\x20',_0x4237ec);});}else alert('User\x20name\x20must\x20be\x2015\x20characters\x20or\x20less.');});function startNewGame(){const _0x438680=_0x3724cb;resetImages(),guessButton['textContent']=_0x438680(0x1b8),guessCount=0x0,startTime=0x0,endTime=0x0,stopTimer(),startTimer(),tingtong=0x1;const _0x5459f8=document[_0x438680(0x1d8)](_0x438680(0x199));_0x5459f8[_0x438680(0x1aa)]='Time\x20Elapsed:\x200\x20seconds';for(const _0x2052c0 in guessedCities){map['removeLayer'](guessedCities[_0x2052c0]);}guessedCities={};marker!==null&&(map[_0x438680(0x19a)](marker),marker=null);var _0x298566=document[_0x438680(0x1d8)]('mly');_0x298566&&(_0x298566[_0x438680(0x1d5)]='');marker=null,initialCity='',initialCountry='',initialCapital='',initialLat=0x0,initialLng=0x0,window[_0x438680(0x1f0)](_0x438680(0x19d),()=>{updateHighScoreList();});const _0xc1eb91=document[_0x438680(0x1d8)](_0x438680(0x196));_0xc1eb91[_0x438680(0x1aa)]='';marker!==null&&(map[_0x438680(0x19a)](marker),marker=null);const _0xbf59d9=document[_0x438680(0x1a2)]('.text-center2');if(_0xbf59d9!==null){}initializeGame();}const newGameButton=document['createElement'](_0x3724cb(0x203));newGameButton['id']=_0x3724cb(0x1e1),newGameButton[_0x3724cb(0x1aa)]='New\x20Game',newGameButton['addEventListener'](_0x3724cb(0x1a4),startNewGame);const textContainer=document['querySelector'](_0x3724cb(0x20c));textContainer['insertBefore'](newGameButton,textContainer[_0x3724cb(0x1df)]);

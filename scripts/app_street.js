const _0x23377f=_0x3b1a;function _0x3b1a(_0x4680df,_0x266707){const _0x71c5df=_0x71c5();return _0x3b1a=function(_0x3b1a80,_0x31f591){_0x3b1a80=_0x3b1a80-0xa2;let _0x511bce=_0x71c5df[_0x3b1a80];return _0x511bce;},_0x3b1a(_0x4680df,_0x266707);}(function(_0x41dae0,_0xdaa743){const _0x570e1b=_0x3b1a,_0x3cde3e=_0x41dae0();while(!![]){try{const _0x694408=-parseInt(_0x570e1b(0x114))/0x1+parseInt(_0x570e1b(0xd8))/0x2*(parseInt(_0x570e1b(0xc0))/0x3)+-parseInt(_0x570e1b(0xd9))/0x4*(-parseInt(_0x570e1b(0xc1))/0x5)+parseInt(_0x570e1b(0xd6))/0x6+-parseInt(_0x570e1b(0x105))/0x7+-parseInt(_0x570e1b(0x119))/0x8*(-parseInt(_0x570e1b(0xe6))/0x9)+-parseInt(_0x570e1b(0xcc))/0xa;if(_0x694408===_0xdaa743)break;else _0x3cde3e['push'](_0x3cde3e['shift']());}catch(_0x2c40d6){_0x3cde3e['push'](_0x3cde3e['shift']());}}}(_0x71c5,0xca07a));function _0x71c5(){const _0x1d400d=['Show\x20High\x20Scores','none','forEach','visibility','date','new\x20york-533358671467146','Time\x20Elapsed:\x200\x20seconds','houston-626149635009294','<strong>Distance\x20from\x20answer:</strong>\x20','barcelona-987420751796837','collection','insertBefore','Error\x20getting\x20high\x20scores:\x20','setView','https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}','&lon=','tokyo-1195388297830542','Error\x20retrieving\x20city,\x20country,\x20and\x20capital\x20for\x20initial\x20coordinates:','reykjavik-200688741736661','button','new\x20york-126491143334729','timer','then','distanceTo','map','user-name','https://nominatim.openstreetmap.org/search?city=','get','High\x20score\x20saved\x20with\x20ID:\x20','toFixed','limit','chicago-513112553151500','icon','</strong>:\x20','new-game-button','../styles/assets/result_marker.png','loading','street_score','addTo','paris-1202903123464252','<br>','data','hanoi-685942156728923','banff-162769565655436','Unknown','player-score','querySelector','4215ZfYvTh','20rSfLme','Time\x20Elapsed:\x20','New\x20Game','length','json','removeLayer','split','innerHTML','appendChild','round','You\x20are\x20too\x20close\x20to\x20a\x20previously\x20guessed\x20city.\x20Try\x20another\x20location.','1015630wqhmlB','cuzco-279416883907644','<strong>Guess\x20Coordinates:</strong>\x20','oslo-229430919192635','addEventListener','jakarta-383086720385784','visible','log','load','hamlet','2081088ZYutOl','toLocaleDateString','566HbswzJ','588844VIcaZy','MLY|6567123976742596|e9835e8db194154123b48d4979d5927c','catch',',\x20Score:\x20','lucerne-1112576252586784','image2','textContent','getElementById','random','Show\x20Map','style','pisa-243324604210417','show-coordinates','9GpRBXG','name','latlng','User\x20name\x20must\x20be\x2015\x20characters\x20or\x20less.','singapore-2800278286968363','city','push','toggle-map','\x20seconds','click','beijing-604012977205983','keystone-768858467067157','result','.text-container','../styles/assets/select_marker.png','.text-center2','bangkok-492548511955809','prague-198071292185889','firstChild','createElement','getLatLng','display','join','toggle-high-scores','error','https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=','floor','high-score-list','village','now','edmonton-276369800814495','3350711BDHqqZ','<strong>Answer\x20Coordinates:</strong>\x20','disabled','Reload\x20the\x20page\x20to\x20start\x20a\x20new\x20round.','lat','<strong>You\x20win!\x20Distance\x20from\x20answer:</strong>\x20','\x20kilometers.\x20<strong>Your\x20Guess:</strong>\x20','<strong>\x20','&format=json','score-table','score','orderBy','save-score','dubai-331484938401580','town','676232FnIBwN','country','address','block','amsterdam-838761340319948','6005400sLRKWu','add','marker','replace'];_0x71c5=function(){return _0x1d400d;};return _0x71c5();}const map=L['map'](_0x23377f(0xa9))[_0x23377f(0x12a)]([0x0,0x0],0x2),tileLayer=L['tileLayer'](_0x23377f(0x12b),{'maxZoom':0x10})[_0x23377f(0xb7)](map);let guessedCities={},playerScore=0x0,marker=null,initialCity='',initialCountry='',initialCapital='',initialLat=0x0,initialLng=0x0,startTime=0x0,endTime=0x0,timerInterval=null;tingtong=0x0;async function initializeGame(){const _0x1d7fd2=_0x23377f;[initialLat,initialLng]=await getRandomLandCoordinates();const _0x27f5da=_0x1d7fd2(0xff)+initialLat+_0x1d7fd2(0x12c)+initialLng;try{const _0x41219b=await fetch(_0x27f5da),_0x5caec5=await _0x41219b['json']();initialCity=_0x5caec5[_0x1d7fd2(0x116)]['city']||_0x5caec5['address'][_0x1d7fd2(0x113)]||_0x5caec5[_0x1d7fd2(0x116)][_0x1d7fd2(0x102)]||_0x5caec5[_0x1d7fd2(0x116)][_0x1d7fd2(0xd5)]||_0x1d7fd2(0xbd),initialCountry=_0x5caec5[_0x1d7fd2(0x116)][_0x1d7fd2(0x115)]||_0x1d7fd2(0xbd);}catch(_0x2fff8d){console[_0x1d7fd2(0xfe)]('Error\x20retrieving\x20city,\x20country,\x20and\x20capital\x20for\x20initial\x20coordinates:',_0x2fff8d);}}function startTimer(){const _0x5ea8e4=_0x23377f;let _0x2c09ee=0x0;const _0x5d1a99=document[_0x5ea8e4(0xe0)](_0x5ea8e4(0xa6));timerInterval=setInterval(()=>{const _0x3a5c4c=_0x5ea8e4;_0x2c09ee++,_0x5d1a99[_0x3a5c4c(0xdf)]=_0x3a5c4c(0xc2)+_0x2c09ee+_0x3a5c4c(0xee);},0x3e8),tingtong=0x5;}map['on'](_0x23377f(0xef),function(_0x553304){const _0x185340=_0x23377f;marker===null?marker=L[_0x185340(0x11b)](_0x553304[_0x185340(0xe8)],{'icon':L[_0x185340(0xb1)]({'iconUrl':_0x185340(0xf4),'iconSize':[0x41,0x41],'iconAnchor':[32.5,0x41]})})[_0x185340(0xb7)](map):marker['setLatLng'](_0x553304[_0x185340(0xe8)]);});if(tingtong!=0x5){startTimer(),startTime=Date[_0x23377f(0x103)]();;}function stopTimer(){clearInterval(timerInterval),timerInterval=null;}async function updateHighScoreList(){const _0x1a7b1e=_0x23377f,_0x18f1e9=document[_0x1a7b1e(0xe0)](_0x1a7b1e(0x101));_0x18f1e9[_0x1a7b1e(0xc8)]='';try{const _0x34f898=await db[_0x1a7b1e(0x127)](_0x1a7b1e(0xb6))[_0x1a7b1e(0x110)](_0x1a7b1e(0x10f),'desc')[_0x1a7b1e(0xaf)](0xa)[_0x1a7b1e(0xac)]();let _0x4aae45=0x1;_0x34f898[_0x1a7b1e(0x11f)](_0xb15bbb=>{const _0x4b980f=_0x1a7b1e,_0x89309d=_0xb15bbb[_0x4b980f(0xba)](),_0x384036=document['createElement']('li');_0x384036['innerHTML']=_0x4b980f(0x10c)+_0x89309d[_0x4b980f(0xe7)]+_0x4b980f(0xb2)+_0x89309d[_0x4b980f(0x10f)]+'\x20points\x20('+_0x89309d[_0x4b980f(0x121)]+')',_0x18f1e9[_0x4b980f(0xc9)](_0x384036),_0x4aae45++;});}catch(_0x196e88){console[_0x1a7b1e(0xfe)](_0x1a7b1e(0x129),_0x196e88);}}let image1=document[_0x23377f(0xe0)]('image1'),image2=document[_0x23377f(0xe0)](_0x23377f(0xde)),image3=document['getElementById']('image3');const guessButton=document[_0x23377f(0xe0)]('guess-button'),showCoordinatesCheckbox=document[_0x23377f(0xe0)](_0x23377f(0xe5));let guessCount=0x0;guessButton[_0x23377f(0xd0)]('click',async function(){const _0x4f629d=_0x23377f;if(marker===null)return;guessCount>=0x2&&(guessButton['textContent']='See\x20the\x20Answer');if(guessCount>=0x3){const _0x496111=L['icon']({'iconUrl':_0x4f629d(0xb4),'iconSize':[0x41,0x41]}),_0x36c189=L[_0x4f629d(0x11b)]([initialLat,initialLng],{'icon':_0x496111})['addTo'](map);return;}guessCount++;const _0x1ff668=marker[_0x4f629d(0xfa)]()[_0x4f629d(0x109)]['toFixed'](0x4),_0x389d91=marker[_0x4f629d(0xfa)]()['lng'][_0x4f629d(0xae)](0x4),_0x20bb1a=document['querySelector']('.text-center2');_0x20bb1a!==null&&(_0x20bb1a[_0x4f629d(0xdf)]='');const _0x487f32=document['getElementById'](_0x4f629d(0xb5));_0x487f32[_0x4f629d(0xe3)][_0x4f629d(0xfb)]=_0x4f629d(0x117);const _0x17ffb8=_0x4f629d(0xff)+_0x1ff668+_0x4f629d(0x12c)+_0x389d91;try{const _0x3b09ba=await fetch(_0x17ffb8),_0x468285=await _0x3b09ba[_0x4f629d(0xc5)](),_0xdea4e4=_0x468285[_0x4f629d(0x116)][_0x4f629d(0xeb)]||_0x468285[_0x4f629d(0x116)][_0x4f629d(0x113)]||_0x468285['address'][_0x4f629d(0x102)]||_0x468285[_0x4f629d(0x116)][_0x4f629d(0xd5)]||_0x4f629d(0xbd),_0x10434c=_0x468285['address'][_0x4f629d(0x115)]||'Unknown',_0x5a3b2f=Math[_0x4f629d(0xca)](marker[_0x4f629d(0xfa)]()['distanceTo']([initialLat,initialLng])),_0xb6a330=[];for(const _0x14bc80 in guessedCities){const _0x3e0d0=marker[_0x4f629d(0xfa)]()[_0x4f629d(0xa8)](guessedCities[_0x14bc80][_0x4f629d(0xfa)]());if(_0x3e0d0<=0xc350){alert(_0x4f629d(0xcb));return;}}if(_0x5a3b2f<0xc350){endTime=Date[_0x4f629d(0x103)]();const _0xa97d62=(endTime-startTime)/0x3e8;playerScore+=0xa,_0xb6a330[_0x4f629d(0xec)](_0x4f629d(0x10a)+_0x5a3b2f/0x3e8+_0x4f629d(0x10b)+_0xdea4e4+',\x20'+_0x10434c+'.\x20'),guessedCities[initialCity]=L[_0x4f629d(0x11b)](marker[_0x4f629d(0xfa)]())[_0x4f629d(0xb7)](map),stopTimer(),_0xb6a330[_0x4f629d(0xec)](_0x4f629d(0x108));const _0x356621=document[_0x4f629d(0xe0)](_0x4f629d(0xbe));_0x356621[_0x4f629d(0xdf)]=playerScore;}else{_0xb6a330[_0x4f629d(0xec)](_0x4f629d(0x125)+_0x5a3b2f/0x3e8+'\x20kilometers.\x20<strong>Your\x20Guess:</strong>\x20'+_0xdea4e4+',\x20'+_0x10434c+'.');if(guessCount===0x1)image1[_0x4f629d(0xe3)][_0x4f629d(0xfb)]='none';else{if(guessCount===0x2)image2['style'][_0x4f629d(0xfb)]=_0x4f629d(0x11e);else guessCount===0x3&&(image3['style'][_0x4f629d(0xfb)]=_0x4f629d(0x11e));}if(initialLat[_0x4f629d(0xae)](0x4)!==0x0&&initialCity!==''&&initialCity!==_0x4f629d(0xbd)){}else{let _0x21b9b3=![];do{[initialLat,initialLng]=await getRandomLandCoordinates();const _0x2b9517=_0x4f629d(0xff)+initialLat+_0x4f629d(0x12c)+initialLng;try{const _0x2eabed=await fetch(_0x2b9517),_0x442d43=await _0x2eabed[_0x4f629d(0xc5)]();initialCity=_0x442d43['address']['city']||_0x442d43[_0x4f629d(0x116)][_0x4f629d(0x113)]||_0x442d43[_0x4f629d(0x116)]['village']||_0x442d43[_0x4f629d(0x116)]['hamlet']||_0x4f629d(0xbd),_0x21b9b3=initialCity!==''&&initialCity!==_0x4f629d(0xbd),initialCountry=_0x442d43[_0x4f629d(0x116)][_0x4f629d(0x115)]||_0x4f629d(0xbd);}catch(_0x570672){console[_0x4f629d(0xfe)](_0x4f629d(0xa2),_0x570672);}}while(!_0x21b9b3);}}showCoordinatesCheckbox['checked']&&(_0xb6a330[_0x4f629d(0xec)](_0x4f629d(0xce)+_0x1ff668+',\x20'+_0x389d91),_0xb6a330['push'](_0x4f629d(0x106)+initialLat['toFixed'](0x4)+',\x20'+initialLng[_0x4f629d(0xae)](0x4)));const _0x1ba6e9=document['getElementById'](_0x4f629d(0xf2));_0x1ba6e9['innerHTML']=_0xb6a330[_0x4f629d(0xfc)](_0x4f629d(0xb9));}catch(_0x820364){console[_0x4f629d(0xfe)]('Error\x20retrieving\x20nearest\x20city,\x20country,\x20and\x20capital:',_0x820364);}finally{_0x487f32[_0x4f629d(0xe3)][_0x4f629d(0xfb)]=_0x4f629d(0x11e);}});function resetImages(){const _0x3cef52=_0x23377f;image1[_0x3cef52(0xe3)][_0x3cef52(0xfb)]='block',image2['style']['display']='block',image3['style'][_0x3cef52(0xfb)]=_0x3cef52(0x117);}function sanitizeInput(_0x1eac35){const _0x1fb590=_0x23377f;return _0x1eac35[_0x1fb590(0x11c)](/</g,'&lt;')['replace'](/&/g,'&amp;');}async function getRandomLandCoordinates(){const _0x2a3ad4=_0x23377f,_0x458093=[_0x2a3ad4(0xb8),'agra-156038159745395',_0x2a3ad4(0xf1),_0x2a3ad4(0x126),_0x2a3ad4(0xf0),_0x2a3ad4(0x12d),'berlin-3239772952947894',_0x2a3ad4(0xdd),_0x2a3ad4(0xe4),_0x2a3ad4(0xf6),_0x2a3ad4(0x124),_0x2a3ad4(0xea),_0x2a3ad4(0xd1),_0x2a3ad4(0xa5),'kabul-143431291046379',_0x2a3ad4(0xbc),_0x2a3ad4(0x104),'london-557807761891307',_0x2a3ad4(0xcf),'calgary-1092582851151417','rio\x20de\x20janeiro-477309337031051',_0x2a3ad4(0xbb),_0x2a3ad4(0xb0),_0x2a3ad4(0x112),_0x2a3ad4(0xcd),_0x2a3ad4(0x122),_0x2a3ad4(0x118),'las\x20vegas-587347449630786',_0x2a3ad4(0xa3),_0x2a3ad4(0xf7)];function _0x1eb40e(_0x4abdbc){const _0xb744a3=_0x2a3ad4;for(let _0xbed778=_0x4abdbc[_0xb744a3(0xc4)]-0x1;_0xbed778>0x0;_0xbed778--){const _0x181e09=Math['floor'](Math[_0xb744a3(0xe1)]()*(_0xbed778+0x1));[_0x4abdbc[_0xbed778],_0x4abdbc[_0x181e09]]=[_0x4abdbc[_0x181e09],_0x4abdbc[_0xbed778]];}}_0x1eb40e(_0x458093);const _0x53387f=_0x458093[Math[_0x2a3ad4(0x100)](Math['random']()*_0x458093[_0x2a3ad4(0xc4)])],_0x3d8819=_0x53387f[_0x2a3ad4(0xc7)]('-')[0x0],_0x4192ad=_0x53387f[_0x2a3ad4(0xc7)]('-')[0x1];var {Viewer:_0x5139ec}=mapillary,_0x5dccf7=new _0x5139ec({'accessToken':_0x2a3ad4(0xda),'container':'mly','imageId':_0x4192ad,'sequence':![]});const _0x35a8ca=_0x3d8819,_0x3afd6d=_0x2a3ad4(0xab)+encodeURIComponent(_0x35a8ca)+_0x2a3ad4(0x10d);let _0x4bccc2,_0x2e9731,_0x2783de,_0x2299a0;try{const _0x46a0ee=await fetch(_0x3afd6d),_0x50b7a4=await _0x46a0ee['json']();_0x50b7a4&&_0x50b7a4[0x0]&&(_0x4bccc2=parseFloat(_0x50b7a4[0x0][_0x2a3ad4(0x109)]),_0x2e9731=parseFloat(_0x50b7a4[0x0]['lon']));}catch(_0x471b53){console[_0x2a3ad4(0xfe)]('Error\x20retrieving\x20city\x20information\x20for:',_0x35a8ca,_0x471b53);}return[_0x4bccc2,_0x2e9731];}let highScoresVisible=![];function toggleHighScores(){const _0x2015c1=_0x23377f,_0x23aa31=document[_0x2015c1(0xe0)](_0x2015c1(0x10e)),_0x239fad=document['getElementById'](_0x2015c1(0xfd));highScoresVisible?(_0x23aa31[_0x2015c1(0xe3)]['display']=_0x2015c1(0x11e),_0x239fad[_0x2015c1(0xdf)]=_0x2015c1(0x11d)):(_0x23aa31[_0x2015c1(0xe3)]['display']=_0x2015c1(0x117),_0x239fad[_0x2015c1(0xdf)]='Hide\x20High\x20Scores'),highScoresVisible=!highScoresVisible;}let mapVisible=![];function toggleMap(){const _0x180f83=_0x23377f,_0x358fe7=document[_0x180f83(0xe0)](_0x180f83(0xa9)),_0x2d3955=document['getElementById'](_0x180f83(0xed));mapVisible?(_0x358fe7[_0x180f83(0xe3)][_0x180f83(0x120)]='hidden',_0x2d3955['textContent']=_0x180f83(0xe2)):(_0x358fe7[_0x180f83(0xe3)]['visibility']=_0x180f83(0xd2),_0x2d3955[_0x180f83(0xdf)]='Hide\x20Map'),mapVisible=!mapVisible;}window['addEventListener'](_0x23377f(0xd4),async function(){await initializeGame(),updateHighScoreList();});const saveScoreButton=document[_0x23377f(0xe0)](_0x23377f(0x111));saveScoreButton[_0x23377f(0xd0)]('click',async()=>{const _0x1a51f4=_0x23377f;saveScoreButton[_0x1a51f4(0x107)]=!![];const _0x4428c8=document[_0x1a51f4(0xe0)](_0x1a51f4(0xaa)),_0x9c9d65=_0x4428c8['value'],_0x57a3a1=sanitizeInput(_0x9c9d65);if(_0x57a3a1&&_0x57a3a1['trim']()!==''&&_0x57a3a1[_0x1a51f4(0xc4)]<=0xf){const _0x112581=playerScore,_0x32d679=new Date()[_0x1a51f4(0xd7)](),_0x4ff038={'name':_0x57a3a1,'score':_0x112581,'date':_0x32d679};db[_0x1a51f4(0x127)](_0x1a51f4(0xb6))[_0x1a51f4(0x11a)](_0x4ff038)[_0x1a51f4(0xa7)](function(_0x5704c5){const _0x485bc1=_0x1a51f4;console[_0x485bc1(0xd3)](_0x485bc1(0xad),_0x5704c5['id']),_0x4428c8[_0x485bc1(0xe3)][_0x485bc1(0xfb)]=_0x485bc1(0x11e),saveScoreButton['style'][_0x485bc1(0xfb)]=_0x485bc1(0x11e);const _0x396ea1=document[_0x485bc1(0xe0)]('submitted-message');_0x396ea1[_0x485bc1(0xe3)][_0x485bc1(0xfb)]=_0x485bc1(0x117);const _0x2a29d6=document[_0x485bc1(0xe0)](_0x485bc1(0x101)),_0x47f8b7=document[_0x485bc1(0xf9)]('li');_0x47f8b7[_0x485bc1(0xdf)]=_0x57a3a1+_0x485bc1(0xdc)+_0x112581+',\x20Date:\x20'+_0x32d679,_0x2a29d6[_0x485bc1(0xc9)](_0x47f8b7);})[_0x1a51f4(0xdb)](function(_0x2cc400){const _0x181ab8=_0x1a51f4;console[_0x181ab8(0xfe)]('Error\x20adding\x20high\x20score:\x20',_0x2cc400);});}else alert(_0x1a51f4(0xe9));});function startNewGame(){const _0x412ae6=_0x23377f;resetImages(),guessButton[_0x412ae6(0xdf)]='Guess\x20City',guessCount=0x0,startTime=0x0,endTime=0x0,stopTimer(),startTimer(),tingtong=0x1;const _0x3907c9=document['getElementById']('timer');_0x3907c9['textContent']=_0x412ae6(0x123);for(const _0x43cf9b in guessedCities){map[_0x412ae6(0xc6)](guessedCities[_0x43cf9b]);}guessedCities={};marker!==null&&(map[_0x412ae6(0xc6)](marker),marker=null);var _0x45c762=document[_0x412ae6(0xe0)]('mly');_0x45c762&&(_0x45c762[_0x412ae6(0xc8)]='');marker=null,initialCity='',initialCountry='',initialCapital='',initialLat=0x0,initialLng=0x0,window[_0x412ae6(0xd0)](_0x412ae6(0xd4),()=>{updateHighScoreList();});const _0x14b9ad=document[_0x412ae6(0xe0)](_0x412ae6(0xf2));_0x14b9ad[_0x412ae6(0xdf)]='';marker!==null&&(map[_0x412ae6(0xc6)](marker),marker=null);const _0x55c9f2=document[_0x412ae6(0xbf)](_0x412ae6(0xf5));if(_0x55c9f2!==null){}initializeGame();}const newGameButton=document[_0x23377f(0xf9)](_0x23377f(0xa4));newGameButton['id']=_0x23377f(0xb3),newGameButton[_0x23377f(0xdf)]=_0x23377f(0xc3),newGameButton[_0x23377f(0xd0)](_0x23377f(0xef),startNewGame);const textContainer=document[_0x23377f(0xbf)](_0x23377f(0xf3));textContainer[_0x23377f(0x128)](newGameButton,textContainer[_0x23377f(0xf8)]);
